<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loja de Games</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav-bar></nav-bar>

    <header>
        <h1>Bem-vindo à Loja de Games!</h1>
    </header>

    <main>
        <section class="top_sales">
            <h2>Produtos em Destaque</h2>
            <!-- Produtos serão carregados aqui -->
        </section>

        <section class="categories">
            <h2>Categorias</h2>
            <!-- Categorias serão carregadas aqui -->
        </section>

        <section class="promotions">
            <h2>Promoções</h2>
            <!-- Promoções serão carregadas aqui -->
        </section>
    </main>

    <footer-component></footer-component>

    <!-- Scripts para carregar os dados dinamicamente -->
    <script>
        // Carregar produtos em destaque
        fetch('api/index.php?request=products')
            .then(response => response.json())
            .then(products => {
                const productsContainer = document.querySelector('.top_sales');
                
                products.forEach(product => {
                    productsContainer.innerHTML += `
                        <card-component
                            image="${product.image_url}"
                            name="${product.name}"
                            price="R$ ${product.price}">
                        </card-component>
                    `;
                });
            })
            .catch(error => console.error('Erro ao carregar produtos:', error));

        // Carregar categorias
        fetch('api/index.php?request=categories')
            .then(response => response.json())
            .then(categories => {
                const categoriesContainer = document.querySelector('.categories');
                
                categories.forEach(category => {
                    categoriesContainer.innerHTML += `
                        <div class="category">
                            <img src="${category.image_url}" alt="${category.name}">
                            <p>${category.name}</p>
                        </div>
                    `;
                });
            })
            .catch(error => console.error('Erro ao carregar categorias:', error));

        // Carregar promoções
        fetch('api/index.php?request=sales')
            .then(response => response.json())
            .then(sales => {
                const promotionsContainer = document.querySelector('.promotions');
                
                sales.forEach(sale => {
                    promotionsContainer.innerHTML += `
                        <div class="promotion">
                            <img src="${sale.image_url}" alt="Promoção">
                            <p>${sale.text1}</p>
                            <p>${sale.text2}</p>
                            <p>${sale.text3}</p>
                            <p>${sale.text4}</p>
                        </div>
                    `;
                });
            })
            .catch(error => console.error('Erro ao carregar promoções:', error));
    </script>
</body>
</html>
